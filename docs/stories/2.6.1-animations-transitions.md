# Story 2.6.1 â€” Animations & Transitions

**Epic:** 6 - Polish & Launch
**Priority:** P1
**Estimate:** 3-4 hours
**Status:** Ready
**Depends on:** Epics 1-5

---

## User Story

As a visitor, I want smooth, intentional animations throughout the site that enhance the experience without being distracting.

---

## Acceptance Criteria

- [ ] Page transitions implemented
- [ ] Scroll-triggered animations refined
- [ ] Hover states consistent
- [ ] Reduced motion support
- [ ] Performance optimized (60fps)

---

## Animation Principles

```yaml
philosophy:
  - Subtle over flashy
  - Purposeful over decorative
  - Slow over fast
  - Reveals over movements

timing:
  fast: "0.2s"     # Hovers, small interactions
  normal: "0.4s"   # Page transitions, medium reveals
  slow: "0.6s"     # Hero, large reveals

easing:
  default: "cubic-bezier(0.25, 0.1, 0.25, 1)"  # Smooth deceleration
  bounce: "cubic-bezier(0.34, 1.56, 0.64, 1)"  # For playful elements (rare)
```

---

## Implementation

### 1. Motion Variants File

```tsx
// src/utils/motionVariants.ts

export const fadeIn = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { duration: 0.6, ease: [0.25, 0.1, 0.25, 1] }
  }
};

export const fadeInUp = {
  hidden: { opacity: 0, y: 20 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.6, ease: [0.25, 0.1, 0.25, 1] }
  }
};

export const fadeInDown = {
  hidden: { opacity: 0, y: -20 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.6, ease: [0.25, 0.1, 0.25, 1] }
  }
};

export const staggerContainer = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1,
      delayChildren: 0.1
    }
  }
};

export const staggerItem = {
  hidden: { opacity: 0, y: 20 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.4, ease: [0.25, 0.1, 0.25, 1] }
  }
};

export const scaleIn = {
  hidden: { opacity: 0, scale: 0.95 },
  visible: {
    opacity: 1,
    scale: 1,
    transition: { duration: 0.4, ease: [0.25, 0.1, 0.25, 1] }
  }
};
```

### 2. Page Transition Wrapper

```tsx
// src/components/PageTransition.tsx

import { motion } from 'framer-motion';

interface PageTransitionProps {
  children: React.ReactNode;
}

export const PageTransition = ({ children }: PageTransitionProps) => {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.4, ease: [0.25, 0.1, 0.25, 1] }}
    >
      {children}
    </motion.div>
  );
};
```

### 3. Scroll-Triggered Animation Hook

```tsx
// src/hooks/useScrollAnimation.ts

import { useInView } from 'framer-motion';
import { useRef } from 'react';

export const useScrollAnimation = (once = true, margin = "-100px") => {
  const ref = useRef(null);
  const isInView = useInView(ref, { once, margin });

  return { ref, isInView };
};
```

### 4. Reduced Motion Support

```tsx
// src/hooks/useReducedMotion.ts

import { useEffect, useState } from 'react';

export const useReducedMotion = () => {
  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);

  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    setPrefersReducedMotion(mediaQuery.matches);

    const listener = (e: MediaQueryListEvent) => {
      setPrefersReducedMotion(e.matches);
    };

    mediaQuery.addEventListener('change', listener);
    return () => mediaQuery.removeEventListener('change', listener);
  }, []);

  return prefersReducedMotion;
};
```

### 5. Usage Example

```tsx
// In any component
import { motion } from 'framer-motion';
import { fadeInUp, staggerContainer, staggerItem } from '@/utils/motionVariants';
import { useReducedMotion } from '@/hooks/useReducedMotion';

const MyComponent = () => {
  const prefersReducedMotion = useReducedMotion();

  if (prefersReducedMotion) {
    // Render without animations
    return <div>{/* content */}</div>;
  }

  return (
    <motion.div
      variants={staggerContainer}
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true }}
    >
      {items.map((item) => (
        <motion.div key={item.id} variants={staggerItem}>
          {item.content}
        </motion.div>
      ))}
    </motion.div>
  );
};
```

---

## CSS Transitions

```css
/* src/index.css */

/* Base transition for interactive elements */
.transition-base {
  transition: all 0.2s ease;
}

/* Hover color transitions */
.transition-colors {
  transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
}

/* Transform transitions */
.transition-transform {
  transition: transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* Opacity transitions */
.transition-opacity {
  transition: opacity 0.3s ease;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

---

## Files to Create/Modify

- [ ] Create `src/utils/motionVariants.ts`
- [ ] Create `src/components/PageTransition.tsx`
- [ ] Create `src/hooks/useScrollAnimation.ts`
- [ ] Update `src/hooks/useReducedMotion.ts` (if exists)
- [ ] Update `src/index.css` with transitions

---

## Testing

- [ ] All animations run at 60fps
- [ ] No layout shift during animations
- [ ] Reduced motion respected
- [ ] Page transitions smooth
- [ ] Scroll animations trigger correctly
- [ ] No animation jank on mobile
